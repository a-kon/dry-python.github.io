<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="Dry-Python"><meta name="author" content="Artem Malyshev"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Readability matters</title><link href="slides.css" rel="stylesheet"></head><body><div class="reveal"><div class="slides"><section><h1>Readability matters</h1><h2><a href="https://dry-python.org/">dry-python.org</a></h2><h4>Artem Malyshev</h4></section><section><h2>BIO</h2><ul><li>5 years experience in Python</li><li>Django Channels 1.0</li><li>Dry Python</li></ul></section><section><h2>Codebase problems</h2><ol><li class="fragment">Fragile</li><li class="fragment">Hard to reason about</li><li class="fragment">Time-consuming</li><li class="fragment">Framework independent</li><li class="fragment">Let's consider WEB for simplicity</li></ol></section><section data-background-image="aff5c485c382439a300952a1903aa1b7.jpg" data-background-size="contain"><h2><span style="background-color: white; padding-left: 20px; padding-right: 20px;">Micro framework</span></h2><ol><li class="fragment"><span style="background-color: white; padding-left: 20px; padding-right: 20px;">Long views</span></li><li class="fragment"><span style="background-color: white; padding-left: 20px; padding-right: 20px;">Lots of "if" statements</span></li></ol></section><section data-background-image="b4353ae91abb68108aaf28f8c3a76c5c.jpg" data-background-size="contain"><br></section><section><h2>Common problems</h2><ul><li>Ad-hoc solutions</li><li>Mess in the code bases</li><li>No time to fix anything</li></ul></section><section><h2>Macro framework problems</h2><p>method call flow charts from docs</p><p>your code frequently intercahnge with framework code "zig zag picture"</p><p>you will see blody method full of framework details right in between of your thoughts about business logic</p></section><section><h2>Feature request</h2><p>looks like one sentence</p><p>you need to "learn and interpret" your code</p></section><section><blockquote><p>If your code is crap, stickies on the wall won't help.</p><a href="https://twitter.com/henrikkniberg">@HenrikKniberg</a><img class="plain" src="8b5cce5f4a93c75cc2e5028723fba061.jpg"></blockquote></section><section><h2>This problems are framework agnostic, language agnostic and</h2><p>even does not relate to programming at all</p></section><section><h2>this is hell picture</h2></section><section><h2>the only sollution we have for this is to write a clever code</h2></section><section><h2>the last time I saw it was...</h2></section><section><h2>in the meeting room :)</h2><p>where we discuss every aspect of the behavior in terms of the business logic</p></section><section><h2>We describe it everything in the straightforward way</h2><h3>Renew subscription</h3><ul><li>check user profile</li><li>check balance</li><li>schedule payment</li><li>enable service</li><li>send notification</li></ul></section><section><h2>Why not write code the same way</h2><pre><code>class Subscription:
    def renew(self):
        self.check_user_profile()
        self.check_balance()
        self.schedule_payment()
        self.enable_service()
        self.send_notification()</code></pre></section><section><h2>It's called service layer</h2></section><section><h2>And business transactions is the best way to write it</h2><p>(in my oppinion)</p><p>A business transaction is a series of operations where any can fail and stop the processing</p></section><section><h2>Real life</h2><pre><code>Code without stories with control flow and variables...</code></pre></section><section><h2>Dry Python</h2><p>This is a set of libraries aimed to improve architecture and code design</p><img class="plain" src="https://raw.githubusercontent.com/dry-python/brand/master/logo/dry-python.png"></section><section><h2>Stories</h2><pre><code>from stories import story, argument

class Subscription:
    @story
    @argument("category_id")
    @argument("price_id")
    def buy(self):
        self.find_category()
        self.find_price()
        self.find_profile()
        self.check_balance()
        self.persist_payment()
        self.persist_subscription()
        self.send_subscription_notification()</code></pre></section><section><h2>Steps</h2><pre><code>from stories import Success, Failure

class Subscription:
    ...

    def check_user_profile(self):
        if not has_subscription(self.ctx.user):
            return Success()
        else:
            return Failure()

    def check_balance(self):
        ...</code></pre></section><section><h2>Usage</h2><pre><code>class SubscribeView(view):

    def post(self, request):
        return Subscription().renew(request.user)</code></pre></section><section><h2>Benefits</h2></section><section><h2>Picture of the annotated context</h2></section><section data-background-image="335b1cb95d5010bb26e11d96f39114bc.png" data-background-size="contain"><br></section><section data-background-image="0b268941b08e07b82b1982ba847f31ec.png" data-background-size="contain"><br></section><section data-background-image="4427b3c017312108535dcfd25fd5898c.png" data-background-size="contain"><br></section><section><h2>Dependencies</h2><p>a way to integrate stories into existed frameworks without boilerplate</p></section><section><h2>Get in touch</h2><ul><li><a href="https://dry-python.org/">Website</a></li><li><a href="https://twitter.com/dry_py">Twitter</a></li><li><a href="https://github.com/dry-python">Github</a></li></ul></section></div></div><script type="text/javascript" src="slides.js"></script></body></html>